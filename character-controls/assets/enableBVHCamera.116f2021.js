import{ba as c,bb as h,b7 as b,b8 as u,bc as g,b1 as m}from"./index.1d625381.js";function l(t){var e;const i=this.targetState.get();i&&i._visible===void 0&&(i.outerObject3d.visible=t);for(const o of this.camera.children)((e=o.userData.manager)==null?void 0:e._visible)===void 0&&(o.visible=t)}function v(){if(this.done)return;const t=this.camera;c.add(t),this.then(()=>c.delete(t)),this.createEffect(()=>{if(!this.targetState.get())return;let e=!0;l.call(this,!e);let o=!0;const d=h(()=>{const s=this.outerObject3d.getWorldPosition(b),a=this.object3d.getWorldPosition(u),f=a.distanceTo(s);t.position.lerp(a,o?1:.1);const n=o?1:t.position.distanceTo(s)/f;t.position.lerpVectors(s,a,n),t.quaternion.copy(this.object3d.getWorldQuaternion(g));const r=m()?!1:n<.35;r!==e&&l.call(this,!r),e=r,o=!1});return()=>{d.cancel()}},[this.targetState.get])}export{v as default};
