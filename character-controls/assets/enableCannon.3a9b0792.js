import{aN as l,aO as y,aP as c}from"./index.1d625381.js";const d=[1,2,4,8,16,32],f=[0,1,2,3,4,5];async function w(t){var a,r;if(t.done)return;l.attach(this.outerObject3d);const{slipperyMaterial:p,defaultMaterial:h,world:o,Body:u,Vec3:n}=await y();if(t.done)return;const s=this.cannonBody=new u({mass:(a=this._mass)!=null?a:1,material:this._slippery?p:h,collisionFilterGroup:d[(r=this._physicsGroup)!=null?r:0],collisionFilterMask:f.filter(i=>{var e;return!((e=this._ignorePhysicsGroups)!=null&&e.includes(i))}).map(i=>d[i]).reduce((i,e)=>i+e,0)});await this.physicsShape(),!t.done&&(this._physics==="2d"&&(s.angularFactor=new n(0,0,1),s.linearFactor=new n(1,1,0)),this._noTumble&&(s.angularFactor=new n(0,0,0)),s.position.copy(this.outerObject3d.position),s.quaternion.copy(this.outerObject3d.quaternion),this.physicsUpdate={},o.addBody(s),c.add(this),t.then(()=>{o.removeBody(s),c.delete(this),this.cannonBody=void 0,this.physicsUpdate=void 0}))}export{w as default};
